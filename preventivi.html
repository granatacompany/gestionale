<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preventivi - SpazioExe</title>
    <link rel="stylesheet" href="assets/style.css">
</head>

<body>

<!-- =========================================================
     SIDEBAR
     ========================================================= -->
<div class="sidebar">
    <h2>SpazioExe</h2>
    <a href="dashboard.html">Dashboard</a>
    <a href="clienti.html">Clienti</a>
    <a href="magazzino.html">Magazzino</a>
    <a href="preventivi.html">Preventivi</a>
    <a href="riparazioni.html">Riparazioni</a>
    <a href="ordini.html">Ordini</a>
</div>

<!-- =========================================================
     CONTENUTO
     ========================================================= -->
<div class="content">

    <h1>Preventivi</h1>

    <!-- =====================================================
         TOGGLE PREVENTIVO RAPIDO
         ===================================================== -->
    <div style="margin-bottom: 20px;">
        <button id="btnRapido" class="toggle-rapido">
            Preventivo rapido
        </button>
    </div>

    <!-- =====================================================
         FORM PREVENTIVO
         ===================================================== -->
    <div class="form-container preventivi">

        <!-- CLIENTE -->
<div class="autocomplete-container">
        <input
             type="text"
             id="prevCliente"
             class="input-gestionale"
             placeholder="Cerca cliente (nome, cognome, telefono)"
             autocomplete="off"
        >
    <div id="autocompleteClienti" class="autocomplete-list"></div>
</div>


        <!-- DESCRIZIONE INTERVENTO -->
            <textarea
                id="prevDescrizione"
                class="input-gestionale"
                placeholder="Descrizione intervento"
            ></textarea>
            
        
        <!-- COSTI BASE -->
            <input
                type="number"
                id="prevTotale"
                class="input-gestionale"
                placeholder="Totale €"
                title="Totale IVA inclusa (22%)"
            >

        


        <!-- =================================================
             SEZIONE AVANZATA
             ================================================= -->
        <div id="sezioneAvanzata" class="preventivo-avanzato">

            
           <!-- =========================
     RICAMBI (DINAMICI)
     ========================= -->
<div class="ricambi-wrapper" id="ricambiWrapper">

    <!-- RIGA RICAMBIO 1 -->
    <div class="riga-ricambio">
    <input
        type="text"
        class="input-gestionale"
        placeholder="Descrizione ricambio"
    >
    <input
        type="url"
        class="input-gestionale"
        placeholder="Link ricambio"
    >
    <input
        type="number"
        class="input-gestionale"
        placeholder="Prezzo €"
        min="0"
        step="0.01"
    >
    <input
        type="number"
        class="input-gestionale"
        placeholder="gg consegna"
        min="0"
        step="1"
        title="Giorni di consegna previsti"
    >
    <button
        type="button"
        id="btnAddRicambio"
        class="btn-add-ricambio"
        title="Aggiungi ricambio"
    >+</button>
</div>



   

</div>

            
            <!-- ALTRI CAMPI AVANZATI -->
            <input
                type="number"
                id="prevManodopera"
                class="input-gestionale"
                placeholder="Manodopera €"
            >

            <input
                type="number"
                id="prevSconto"
                class="input-gestionale"
                placeholder="Sconto €"
                title="Sconto applicato dopo IVA (serve per arrotondare il totale)"
            >


            <input
                type="number"
                id="prevTempoStimato"
                class="input-gestionale"
                placeholder="Tempo stimato (minuti)"
            >

        </div>

        <!-- AZIONE -->
        <button id="btnSalvaPreventivo">
            Salva preventivo
        </button>
        
        <button id="btnEliminaPreventivo" style="display:none;">
             Elimina preventivo
        </button>

    </div>

    <!-- =====================================================
         TABELLA PREVENTIVI Attivi
         ===================================================== -->
   <table id="tabPreventivi">
  <thead>
    <tr>
      <th>Data</th>
      <th>Cliente</th>
      <th>Descrizione</th>
      <th>Ricambi</th>
      <th>Totale</th>
      <th>Tempo</th>
      <th>Promessa</th>
      <th>Accettato</th>
      

      
    </tr>
  </thead>
  <tbody></tbody>
</table>
 <!-- =====================================================
         TABELLA storico PREVENTIVI
         ===================================================== -->
<h2>Storico preventivi</h2>
<table id="tabStoricoPreventivi">
  <thead>
    <tr>
        <th>Data</th>
        <th>Cliente</th>
        <th>Descrizione</th>
        <th>Ricambi</th>
        <th>Totale</th>
        <th>Tempo</th>
        <th>Promessa</th>
        <th>Stato</th>
        

    </tr>
  </thead>
  <tbody></tbody>
</table>

</div>
<td class="${classe}">${stato}</td>

<div id="previewPreventivo" style="display:none" class="preview-overlay">
  <div class="preview-box">

    <h2>Anteprima preventivo</h2>

    <p><strong>ID:</strong> <span id="pv-id"></span></p>
    <p><strong>Cliente:</strong> <span id="pv-cliente"></span></p>
    <p><strong>Descrizione:</strong></p>
    <p id="pv-descrizione"></p>
    <p><strong>Totale:</strong> € <span id="pv-totale"></span></p>

    <div class="preview-actions">
      <button type="button" id="pv-stampa">Stampa</button>
      <button type="button" id="pv-whatsapp">WhatsApp</button>
      <button type="button" id="pv-chiudi">Chiudi</button>
    </div>

  </div>
</div>

<!-- =====================================================
     MODAL ACCONTO PREVENTIVO
     ===================================================== -->
<div id="modalAcconto" class="preview-overlay" style="display:none">
  <div class="preview-box">

    <h2>Inserisci acconto</h2>

    <p>
      Totale preventivo: <strong>€ <span id="acconto-totale"></span></strong>
    </p>

    <input
      type="number"
      id="inputAcconto"
      class="input-gestionale"
      placeholder="(Acconto suggerito)"
      min="-1"
      step="0.01"
    >

    <div class="preview-actions">
      <button id="btnConfermaAcconto">Conferma</button>
    </div>

  </div>
</div>



<!-- SCRIPT GLOBALI -->
<script src="js/script.js"></script>

<!-- SCRIPT DELLA PAGINA -->
<script src="js/preventivi.js"></script>
</body>
</html>
